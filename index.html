<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GenMind Labs - Expert Writing & Research Services</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.paypal.com/sdk/js?client-id=AdWx5TbcIy0T0yDMOD49PBn_lcufRxIaHBpveKBzKLFT8HE1zFe-GD0RMP8TblS6-OKnwC92WTRwo-xO&currency=USD"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .hidden { display: none !important; }
    html { scroll-behavior: smooth; }
    .navbar-shadow { box-shadow: 0 2px 12px 0 rgba(30,50,80,0.06);}
    .service-card { transition: transform .3s, box-shadow .3s;}
    .service-card:hover { transform: translateY(-6px) scale(1.03); box-shadow: 0 8px 20px -5px rgba(0,0,0,.09);}
    .rounded-btn { border-radius: 0.75rem !important;}
    .auth-modal-bg {background: rgba(30,41,59,0.46);}
    #orderForm input[readonly] { background-color: #e5e7eb;}
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

  <!-- NAVBAR: logo left, links centered, sign up right -->
  <nav class="bg-white navbar-shadow w-full fixed top-0 z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between relative">
      <!-- Logo Left -->
      <div class="flex-shrink-0 flex items-center h-full">
        <a href="#" class="text-3xl font-extrabold text-sky-800 tracking-tight" style="letter-spacing:-1px;">GenMind Labs</a>
      </div>
      <!-- Centered Menu -->
      <div class="absolute left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 flex space-x-10 text-lg font-medium">
        <a href="#home" class="hover:text-sky-700 transition">Home</a>
        <a href="#about" class="hover:text-sky-700 transition">About</a>
        <a href="#services" class="hover:text-sky-700 transition">Services</a>
        <a href="#why-us" class="hover:text-sky-700 transition">Why Us</a>
        <a href="#order" class="hover:text-sky-700 transition">Order</a>
        <a href="#contact" class="hover:text-sky-700 transition">Contact</a>
      </div>
      <!-- Sign Up/Logout Button Right -->
      <div class="flex-shrink-0 flex items-center h-full">
        <button id="authShowBtn" class="bg-sky-700 hover:bg-sky-800 text-white font-bold py-3 px-8 rounded-xl shadow-md transition focus:outline-none">Sign Up</button>
        <button id="logoutBtn" class="bg-red-500 hover:bg-red-700 text-white font-bold py-3 px-8 rounded-xl shadow-md transition hidden focus:outline-none ml-2">Logout</button>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header id="home" class="pt-36 pb-20 bg-gray-100 min-h-[350px] flex flex-col items-center justify-center text-center">
    <h1 class="text-6xl md:text-7xl font-extrabold text-sky-800 mb-6" style="letter-spacing:-2px;">GenMind Labs</h1>
    <p class="text-2xl md:text-3xl text-gray-700 mb-10 max-w-3xl mx-auto">
      Unlocking Insights, Crafting Excellence: Your Partner in Premier Writing & Research.
    </p>
    <a href="#services" class="bg-sky-700 hover:bg-sky-800 text-white font-bold py-4 px-10 rounded-btn text-xl shadow-lg transition">Explore Our Services</a>
  </header>

  <!-- ABOUT -->
  <section id="about" class="py-16 md:py-24 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="text-center text-sky-700 text-3xl font-extrabold mb-8">About GenMind Labs</h2>
      <div class="md:flex md:items-center md:space-x-12">
        <div class="md:w-1/2 mb-8 md:mb-0">
          <img src="https://images.unsplash.com/photo-1521737852567-6949f3f9f2b5?auto=format&fit=crop&w=600&q=80"
               alt="GenMind Labs Team"
               class="rounded-lg shadow-xl w-full h-auto object-cover" loading="lazy">
          <div class="text-sm text-center text-gray-500 mt-2">Our Team at GenMind Labs</div>
        </div>
        <div class="md:w-1/2 text-lg text-gray-700 space-y-4">
          <p>
            GenMind Labs is a dedicated collective of experienced writers and researchers passionate about transforming complex information into clear, compelling, and impactful content. We believe that well-crafted words and meticulous research are the cornerstones of success in any field.
          </p>
          <p>
            Our mission is to provide top-tier writing and research solutions tailored to meet the unique needs of academics, businesses, and individuals. We strive for excellence, precision, and timely delivery in every project we undertake.
          </p>
          <p>
            At GenMind Labs, we're not just service providers; we're your partners in achieving your communication and knowledge-based goals.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- SERVICES (includes Data Analysis & Structural Designing) -->
  <section id="services" class="py-16 md:py-24 bg-gray-100">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="text-center text-sky-700 text-3xl font-extrabold mb-8">Our Services</h2>
      <p class="text-center text-lg text-gray-600 mb-12 max-w-2xl mx-auto">
        We offer a comprehensive suite of writing and research services designed to elevate your projects and deliver outstanding results.
      </p>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-graduation-cap fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Academic Writing</h3>
          <p class="text-gray-600">
            Essays, research papers, dissertations, theses, literature reviews, and more. Academic standards and citation styles observed.
          </p>
        </div>
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-flask fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Research &amp; Analysis</h3>
          <p class="text-gray-600">
            Comprehensive research including data collection, qualitative/quantitative, market and scientific research support.
          </p>
        </div>
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-pen-nib fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Content Creation</h3>
          <p class="text-gray-600">
            SEO-friendly content for websites, blogs, articles, white papers, case studies, and marketing materials.
          </p>
        </div>
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-chart-bar fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Data Analysis</h3>
          <p class="text-gray-600">
            Statistical/data analysis with R, SPSS, Python, Excel, SQL, BI tools. Actionable insights, dashboards, visualizations, and reports.
          </p>
        </div>
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-drafting-compass fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Structural Designing</h3>
          <p class="text-gray-600">
            Structural design solutions, modeling, drafting, engineering support, and presentation-ready plans for diverse projects.
          </p>
        </div>
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-edit fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Editing & Proofreading</h3>
          <p class="text-gray-600">
            Meticulous editing and proofreading to ensure clarity, coherence, accuracy, and professional polish for all your documents.
          </p>
        </div>
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-briefcase fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Business Writing</h3>
          <p class="text-gray-600">
            Business plans, reports, proposals, presentations, and corporate communications tailored to your business needs.
          </p>
        </div>
        <div class="service-card bg-white p-8 rounded-xl shadow-lg">
          <div class="text-sky-600 mb-4 text-center">
            <i class="fas fa-file-signature fa-3x"></i>
          </div>
          <h3 class="text-2xl font-semibold text-gray-800 mb-3">Grant &amp; Proposal Writing</h3>
          <p class="text-gray-600">
            Compelling grant proposals and applications to help you secure funding for your projects and initiatives.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- WHY US -->
  <section id="why-us" class="py-16 md:py-24 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="text-center text-sky-700 text-3xl font-extrabold mb-8">Why Choose GenMind Labs?</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-10 mt-12">
        <div class="text-center p-6">
          <div class="bg-sky-100 text-sky-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow">
            <i class="fas fa-medal fa-2x"></i>
          </div>
          <h3 class="text-xl font-semibold text-gray-800 mb-2">Expertise & Quality</h3>
          <p class="text-gray-600">Seasoned professionals with diverse backgrounds ensure high-quality, well-researched content.</p>
        </div>
        <div class="text-center p-6">
          <div class="bg-sky-100 text-sky-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow">
            <i class="fas fa-user-shield fa-2x"></i>
          </div>
          <h3 class="text-xl font-semibold text-gray-800 mb-2">Confidentiality</h3>
          <p class="text-gray-600">Strict confidentiality, your ideas and data are secure with us.</p>
        </div>
        <div class="text-center p-6">
          <div class="bg-sky-100 text-sky-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow">
            <i class="fas fa-clock fa-2x"></i>
          </div>
          <h3 class="text-xl font-semibold text-gray-800 mb-2">Timely Delivery</h3>
          <p class="text-gray-600">We deliver projects on time, every time.</p>
        </div>
        <div class="text-center p-6">
          <div class="bg-sky-100 text-sky-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow">
            <i class="fas fa-cogs fa-2x"></i>
          </div>
          <h3 class="text-xl font-semibold text-gray-800 mb-2">Customized Solutions</h3>
          <p class="text-gray-600">Personalized support and attention to detail for your requirements.</p>
        </div>
        <div class="text-center p-6">
          <div class="bg-sky-100 text-sky-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow">
            <i class="fas fa-headset fa-2x"></i>
          </div>
          <h3 class="text-xl font-semibold text-gray-800 mb-2">Excellent Support</h3>
          <p class="text-gray-600">Our team is always ready to assist you with clear communication and support.</p>
        </div>
        <div class="text-center p-6">
          <div class="bg-sky-100 text-sky-600 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4 shadow">
            <i class="fas fa-lightbulb fa-2x"></i>
          </div>
          <h3 class="text-xl font-semibold text-gray-800 mb-2">Innovative Approach</h3>
          <p class="text-gray-600">We leverage the latest methodologies and writing techniques for impactful results.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- TESTIMONIALS -->
  <section id="testimonials" class="py-16 md:py-24 bg-gray-100">
    <div class="max-w-7xl mx-auto px-6">
      <h2 class="text-center text-sky-700 text-3xl font-extrabold mb-8">What Our Clients Say</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12">
        <div class="p-6 rounded-lg shadow-md bg-white border text-center">
          <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Nikki Hailey" class="w-12 h-12 rounded-full mb-3 mx-auto">
          <p class="text-gray-600 italic mb-4">"GenMind Labs delivered exceptional research for our project. Their attention to detail and insightful analysis were invaluable. Highly recommended!"</p>
          <p class="font-semibold text-gray-800">- Nikki Hailey, Academic Researcher</p>
        </div>
        <div class="p-6 rounded-lg shadow-md bg-white border text-center">
          <img src="https://randomuser.me/api/portraits/men/35.jpg" alt="John Smith" class="w-12 h-12 rounded-full mb-3 mx-auto">
          <p class="text-gray-600 italic mb-4">"The team at GenMind Labs transformed our website content. It's now engaging, clear, and perfectly captures our brand voice. Thank you!"</p>
          <p class="font-semibold text-gray-800">- John Smith, CEO of Tech Solutions Inc.</p>
        </div>
        <div class="p-6 rounded-lg shadow-md bg-white border text-center">
          <img src="https://randomuser.me/api/portraits/men/41.jpg" alt="Alex Johnson" class="w-12 h-12 rounded-full mb-3 mx-auto">
          <p class="text-gray-600 italic mb-4">"I was struggling with my dissertation, and GenMind Labs provided the expert guidance and writing support I needed to succeed. Professional and reliable."</p>
          <p class="font-semibold text-gray-800">- Alex Johnson, PhD Candidate</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ORDER SECTION -->
  <section id="order" class="py-16 md:py-24 bg-white min-h-screen flex items-center">
    <div class="max-w-2xl mx-auto px-6 w-full">
      <h2 class="text-center text-sky-700 text-3xl font-extrabold mb-8">Place Your Order</h2>
      <div class="bg-gray-50 p-8 rounded-xl shadow-lg w-full">
        <div id="orderFormWrapper">
          <!-- Shown unless logged in & verified -->
          <div id="orderLockedMsg" class="text-center">
            <p class="mb-6 text-gray-700 text-lg">You need an account to place an order.</p>
            <button id="authShowBtn2" class="bg-sky-700 hover:bg-sky-800 text-white font-semibold py-3 px-8 rounded-btn text-lg shadow-lg">Sign Up / Login to Order</button>
          </div>
          <!-- Order form is hidden unless logged in+verified -->
          <form id="orderForm" class="space-y-6 hidden">
            <input type="text" id="orderName" name="name" placeholder="Your Name" class="w-full px-4 py-3 border rounded-lg" required readonly>
            <input type="email" id="orderEmail" name="email" placeholder="Email" class="w-full px-4 py-3 border rounded-lg" required readonly>
            <select id="service" name="service" required class="w-full px-4 py-3 border rounded-lg">
              <option value="">Select a service</option>
              <option>Academic Writing</option>
              <option>Research & Analysis</option>
              <option>Content Creation</option>
              <option>Data Analysis</option>
              <option>Structural Designing</option>
              <option>Editing & Proofreading</option>
              <option>Business Writing</option>
              <option>Grant & Proposal Writing</option>
            </select>
            <input type="number" id="pages" name="pages" min="1" value="1" required class="w-full px-4 py-3 border rounded-lg" placeholder="Number of Pages">
            <input type="text" id="amount" name="amount" value="7" readonly class="w-full px-4 py-3 border rounded-lg bg-gray-200 text-gray-800" placeholder="Total Amount (USD)">
            <textarea id="details" name="details" rows="4" required class="w-full px-4 py-3 border rounded-lg" placeholder="Describe your project, deadline, and any special requirements..."></textarea>
            <!-- PayPal Button (must pay to enable submit) -->
            <div>
              <label class="block font-medium mb-1">Pay Online</label>
              <div id="paypal-button-container" class="mb-2"></div>
              <p class="text-gray-500 text-xs">Pay with PayPal. Order submission unlocks after payment.</p>
            </div>
            <button type="submit" id="orderSubmitBtn" class="w-full bg-sky-700 text-white py-3 rounded-btn font-semibold cursor-not-allowed opacity-50" disabled>Submit Order</button>
            <p id="orderMessage" class="text-center text-green-600 font-medium mt-3 hidden"></p>
          </form>
          <!-- Email verify prompt -->
          <div id="verifyPrompt" class="text-yellow-700 bg-yellow-100 border-l-4 border-yellow-400 p-4 mb-6 rounded-lg hidden text-center">
            Please verify your email address. <button id="resendEmailBtn" class="text-sky-700 underline ml-2">Resend email</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- CONTACT -->
  <section id="contact" class="py-16 md:py-24 bg-sky-700 text-white">
    <div class="max-w-3xl mx-auto px-6">
      <h2 class="text-center text-white text-3xl font-extrabold mb-10">Get in Touch</h2>
      <div class="bg-white text-gray-800 p-8 md:p-12 rounded-xl shadow-2xl">
        <p class="text-lg text-center mb-8">
          Ready to start your next project or have questions? We'd love to hear from you!
        </p>
        <div class="md:flex md:justify-around text-center">
          <div class="mb-6 md:mb-0">
            <i class="fas fa-envelope fa-2x text-sky-600 mb-2"></i>
            <h3 class="text-xl font-semibold mb-1">Email Us</h3>
            <a href="mailto:genmindslab.xyz@gmail.com" class="text-sky-600 hover:text-sky-800 text-lg">genmindslab.xyz@gmail.com</a>
          </div>
          <div class="mb-6 md:mb-0">
            <i class="fas fa-phone-alt fa-2x text-sky-600 mb-2"></i>
            <h3 class="text-xl font-semibold mb-1">Call Us</h3>
            <a href="tel:+254739264889" class="text-sky-600 hover:text-sky-800 text-lg">+254 739 264889</a>
          </div>
        </div>
        <div class="mt-10 text-center">
          <p class="text-gray-600">You can also reach out to us to discuss your specific needs or to get a custom quote.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-gray-800 text-gray-300 py-8">
    <div class="container mx-auto px-6 text-center">
      <p>&copy; <span id="currentYear"></span> GenMind Labs. All Rights Reserved.</p>
      <p class="text-sm mt-1">Designed with <i class="fas fa-heart text-sky-500"></i> by AI</p>
    </div>
  </footer>

  <!-- AUTH MODAL -->
  <div id="authModal" class="fixed inset-0 auth-modal-bg z-50 flex items-center justify-center hidden fade-in">
    <div class="bg-white rounded-xl shadow-xl w-full max-w-md p-8 relative">
      <div id="authForms">
        <h2 id="authTitle" class="text-2xl font-bold mb-6 text-sky-700 text-center">Create Your Account</h2>
        <form id="signupForm" class="space-y-4">
          <input type="text" id="signupName" placeholder="Full Name" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-500" required>
          <input type="email" id="signupEmail" placeholder="Email" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-500" required>
          <input type="password" id="signupPassword" placeholder="Password" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-500" required>
          <button type="submit" class="w-full bg-sky-700 hover:bg-sky-800 text-white py-3 rounded-btn font-semibold">Sign Up</button>
        </form>
        <form id="loginForm" class="space-y-4 hidden">
          <input type="email" id="loginEmail" placeholder="Email" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-500" required>
          <input type="password" id="loginPassword" placeholder="Password" class="w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-sky-500" required>
          <button type="submit" class="w-full bg-sky-700 hover:bg-sky-800 text-white py-3 rounded-btn font-semibold">Login</button>
        </form>
        <div class="text-sm text-center mt-4">
          <span id="toggleAuthText">Already have an account?</span>
          <button id="toggleAuthBtn" class="text-sky-700 hover:underline">Login</button>
        </div>
        <p id="authMessage" class="text-center text-green-600 font-medium mt-3 hidden"></p>
        <p id="authError" class="text-center text-red-600 font-medium mt-3 hidden"></p>
      </div>
    </div>
  </div>

  <!-- Chatra Widget -->
  <script>
    (function(d, w, c) {
      w.ChatraID = 'NrddzYFDPdfXe6d6c';
      var s = d.createElement('script');
      w[c] = w[c] || function() { (w[c].q = w[c].q || []).push(arguments); };
      s.async = true;
      s.src = 'https://call.chatra.io/chatra.js';
      if (d.head) d.head.appendChild(s);
    })(document, window, 'Chatra');
  </script>

  <!-- Firebase and App Logic -->
  <script>
    // Current year in footer
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    // Initialize Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD5Istqa1dW-iCIbCICnWSrJOn_S1lUBlI",
      authDomain: "genmindlabs.firebaseapp.com",
      projectId: "genmindlabs",
      storageBucket: "genmindlabs.firebasestorage.app",
      messagingSenderId: "590161416837",
      appId: "1:590161416837:web:851b92227c8fc908c78fec",
      measurementId: "G-DTFLHKBXYT"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // UI Elements
    const authModal = document.getElementById('authModal');
    const authShowBtn = document.getElementById('authShowBtn');
    const authShowBtn2 = document.getElementById('authShowBtn2');
    const logoutBtn = document.getElementById('logoutBtn');
    const authTitle = document.getElementById('authTitle');
    const signupForm = document.getElementById('signupForm');
    const loginForm = document.getElementById('loginForm');
    const toggleAuthBtn = document.getElementById('toggleAuthBtn');
    const toggleAuthText = document.getElementById('toggleAuthText');
    const authMessage = document.getElementById('authMessage');
    const authError = document.getElementById('authError');
    const orderForm = document.getElementById('orderForm');
    const orderFormWrapper = document.getElementById('orderFormWrapper');
    const orderLockedMsg = document.getElementById('orderLockedMsg');
    const orderName = document.getElementById('orderName');
    const orderEmail = document.getElementById('orderEmail');
    const pagesInput = document.getElementById('pages');
    const amountInput = document.getElementById('amount');
    const orderSubmitBtn = document.getElementById('orderSubmitBtn');
    const orderMessage = document.getElementById('orderMessage');
    const verifyPrompt = document.getElementById('verifyPrompt');
    const resendEmailBtn = document.getElementById('resendEmailBtn');

    // Auth modal logic
    function showAuthModal() { authModal.classList.remove('hidden'); }
    function hideAuthModal() { authModal.classList.add('hidden'); }
    if (authShowBtn) authShowBtn.onclick = showAuthModal;
    if (authShowBtn2) authShowBtn2.onclick = showAuthModal;

    // Toggle Signup/Login forms
    let signupMode = true;
    toggleAuthBtn.onclick = () => {
      signupMode = !signupMode;
      if (signupMode) {
        signupForm.classList.remove('hidden');
        loginForm.classList.add('hidden');
        authTitle.textContent = 'Create Your Account';
        toggleAuthText.textContent = 'Already have an account?';
        toggleAuthBtn.textContent = 'Login';
      } else {
        signupForm.classList.add('hidden');
        loginForm.classList.remove('hidden');
        authTitle.textContent = 'Login to Your Account';
        toggleAuthText.textContent = 'Don\'t have an account?';
        toggleAuthBtn.textContent = 'Sign Up';
      }
      authError.classList.add('hidden');
      authMessage.classList.add('hidden');
    };

    // Signup handler
    signupForm.onsubmit = async (e) => {
      e.preventDefault();
      authError.classList.add('hidden');
      const email = document.getElementById('signupEmail').value;
      const password = document.getElementById('signupPassword').value;
      try {
        const userCred = await auth.createUserWithEmailAndPassword(email, password);
        await userCred.user.updateProfile({ displayName: document.getElementById('signupName').value });
        await userCred.user.sendEmailVerification();
        authMessage.textContent = "Signup successful! Check your email to verify before logging in.";
        authMessage.classList.remove('hidden');
        signupForm.reset();
      } catch (err) {
        authError.textContent = err.message;
        authError.classList.remove('hidden');
      }
    };

    // Login handler
    loginForm.onsubmit = async (e) => {
      e.preventDefault();
      authError.classList.add('hidden');
      try {
        const { user } = await auth.signInWithEmailAndPassword(
          document.getElementById('loginEmail').value,
          document.getElementById('loginPassword').value
        );
        if (!user.emailVerified) {
          authError.textContent = "Please verify your email first. Check your inbox.";
          authError.classList.remove('hidden');
          await auth.signOut();
          return;
        }
        hideAuthModal();
      } catch (err) {
        authError.textContent = err.message;
        authError.classList.remove('hidden');
      }
    };

    // Auth state change handler
    auth.onAuthStateChanged(async (user) => {
      if (user && user.emailVerified) {
        orderLockedMsg.classList.add('hidden');
        orderForm.classList.remove('hidden');
        orderName.value = user.displayName || '';
        orderEmail.value = user.email || '';
        verifyPrompt.classList.add('hidden');
        logoutBtn.classList.remove('hidden');
        if (authShowBtn) authShowBtn.classList.add('hidden');
        if (authShowBtn2) authShowBtn2.classList.add('hidden');
        renderPayPalButton();
      } else if (user && !user.emailVerified) {
        orderLockedMsg.classList.add('hidden');
        orderForm.classList.add('hidden');
        verifyPrompt.classList.remove('hidden');
        logoutBtn.classList.remove('hidden');
        if (authShowBtn) authShowBtn.classList.add('hidden');
        if (authShowBtn2) authShowBtn2.classList.add('hidden');
      } else {
        orderLockedMsg.classList.remove('hidden');
        orderForm.classList.add('hidden');
        verifyPrompt.classList.add('hidden');
        logoutBtn.classList.add('hidden');
        if (authShowBtn) authShowBtn.classList.remove('hidden');
        if (authShowBtn2) authShowBtn2.classList.remove('hidden');
      }
    });

    // Logout
    if (logoutBtn) logoutBtn.onclick = () => {
      auth.signOut();
      hideAuthModal();
    };

    // Resend verification email
    if (resendEmailBtn) {
      resendEmailBtn.onclick = async () => {
        if (auth.currentUser && !auth.currentUser.emailVerified) {
          await auth.currentUser.sendEmailVerification();
          alert("Verification email resent!");
        }
      };
    }

    // Order form logic (PayPal payment required)
    pagesInput.oninput = () => {
      const pages = parseInt(pagesInput.value) || 1;
      amountInput.value = (pages * 7).toFixed(2);
      renderPayPalButton();
    };

    let paymentApproved = false;
    function renderPayPalButton() {
      const amount = parseInt(pagesInput.value) * 7;
      document.getElementById('paypal-button-container').innerHTML = '';
      paypal.Buttons({
        createOrder: function (data, actions) {
          return actions.order.create({
            purchase_units: [{ amount: { value: amount.toFixed(2) }, description: 'GenMind Labs Order' }]
          });
        },
        onApprove: function (data, actions) {
          return actions.order.capture().then(function (details) {
            paymentApproved = true;
            orderSubmitBtn.disabled = false;
            orderSubmitBtn.classList.remove('cursor-not-allowed', 'opacity-50');
            alert('Payment complete! You can now submit your order.');
          });
        }
      }).render('#paypal-button-container');
      orderSubmitBtn.disabled = !paymentApproved;
      if (paymentApproved) {
        orderSubmitBtn.classList.remove('cursor-not-allowed', 'opacity-50');
      } else {
        orderSubmitBtn.classList.add('cursor-not-allowed', 'opacity-50');
      }
    }

    // Order submission
    orderForm.onsubmit = async function (e) {
      e.preventDefault();
      if (!paymentApproved) {
        alert("You must pay before submitting your order.");
        return;
      }
      // Submit order to Formspree
      const formData = new FormData(orderForm);
      fetch("https://formspree.io/f/xldnrowa", {
        method: "POST",
        body: formData,
        headers: { 'Accept': 'application/json' }
      }).then(response => {
        if (response.ok) {
          orderMessage.textContent = "Order submitted! We'll contact you soon.";
          orderMessage.classList.remove('hidden');
          orderForm.reset();
          paymentApproved = false;
          renderPayPalButton();
        } else {
          orderMessage.textContent = "Order failed. Please try again.";
          orderMessage.classList.remove('hidden');
        }
      }).catch(() => {
        orderMessage.textContent = "Order failed. Please try again.";
        orderMessage.classList.remove('hidden');
      });
    };
  </script>
</body>
</html>
